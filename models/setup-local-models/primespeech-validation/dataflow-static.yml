nodes:
  # Static text sender node with delay
  - id: text-sender
    path: simple_text_sender_static.py
    outputs:
      - text_output
      
  # Text Segmenter - receives long text and segments it
  - id: text-segmenter
    build: pip install -e ../../python-nodes/dora-text-segmenter
    path: dora-text-segmenter
    inputs:
      text:
        source: text-sender/text_output
        queue_size: 10
      tts_complete:
        source: primespeech/segment_complete
        queue_size: 10
    outputs:
      - text_segment
      - status
      - metrics
    env:
      CLEAR_SCREEN: false
      MAX_SEGMENT_LENGTH: 100
      MIN_SEGMENT_LENGTH: 20
      SEGMENT_MODE: sentence
      PUNCTUATION_MARKS: "。！？.!?；;"
      LOG_LEVEL: INFO
      
  # PrimeSpeech TTS - receives segmented text and generates audio
  - id: primespeech
    build: pip install -e ../../python-nodes/dora-primespeech
    path: dora-primespeech
    inputs:
      text:
        source: text-segmenter/text_segment
        queue_size: 10
    outputs:
      - audio
      - segment_complete
      - log
    env:
      VOICE_NAME: Doubao
      TEXT_LANG: zh
      USE_GPU: false
      DEVICE: cpu
      RETURN_FRAGMENT: false
      PRIMESPEECH_MODEL_DIR: ${HOME}/.dora/models/primespeech
      SPEED_FACTOR: 1.0
      LOG_LEVEL: DEBUG  # Enable debug logging
      
  # Static audio recorder node
  - id: audio-recorder
    path: audio_recorder_static.py
    inputs:
      audio:
        source: primespeech/audio
        queue_size: 100
    outputs:
      - status